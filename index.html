
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
		<script>
		function generate(l) {
			if (typeof l==='undefined'){var l=10;}
			/* c : chaine de caracteres alphanumerique */
			var c='abcdefghijknopqrstuvwxyzACDEFGHJKLMNPQRSTUVWXYZ12345679',
			n=c.length,
			/* p : chaine de caracteres speciaux */
			p='',
			o=p.length,
			r='',
			n=c.length,
			/* s : determine la position du caractere special dans le mdp */
			s=Math.floor(Math.random() * (p.length-1));

		    for(var i=0; i<l; ++i){
		        if(s == i){
		        	/* on insere a la position donnee un caractere special aleatoire */
			        r += p.charAt(Math.floor(Math.random() * o));
		        }else{
		        	/* on insere un caractere alphanumerique aleatoire */
			        r += c.charAt(Math.floor(Math.random() * n));
		        }
		    }
		    return r;
		}

		/* exemple de fonction generation de mdp dans un form (utilise JQuery) */
		$(document).ready(function() {
			/* on detecte un des champ du formulaire contient une class "gen", on inserera un bouton dans sa div parent qui appelera la fonction generate() */
			if($('form input.gen').length){
				$('form input.gen').each(function(){
					$('<span class="generate" style="cursor:pointer"><i class="fa fa-fw fa-refresh"></i></span>').appendTo($(this).parent());
				});
			}
			
			/* evenement click sur un element de class "generate" > appelle la fonction generate() */
		    $(document).on('click','.generate', function(e){
		        e.preventDefault();
		        /* ajout du mot de passe + changement du parametre type de password vers text (pour lisibilite) */
		        $(this).parent().children('input').val(generate()).attr('type','text');
			});
		}); 

		</script>
	</head>
	<body>
		<form>
			
		    <div>
		    	<label for="password">PASS GEN:</label>
		    	<input type="text" class="gen" placeholder="" required="required" name="password" id="password">
		    </div>
		</form>
	</body>
</html>
